/**
 * jQuery Plugin for fetching row from database
 * @version 1.1
 * @requires jQuery 1.4 or later
 *
 * Copyright (c) 2016 Lucky
 * Licensed under the GPL license:
 *   http://www.gnu.org/licenses/gpl.html
 */

(function(b){function a(f,e){var g=this;var d=f.keyfield;this.preventEnter=function(){e.keypress(function(h){if(h.keyCode==13){return false}return true})};this.doRequest=function(){b.ajax({url:f.url+d.val(),success:function(h){try{data=b.parseJSON(h);if(typeof f.onPopulated==="function"){if(data==null){if(typeof f.onNullPopulated==="function"){f.onNullPopulated.call(this,e)}}else{f.onPopulated.call(this,data,e)}}}catch(i){alert("Sorry, an error has occured!")}},error:function(j,h,i){alert("Sorry, an error has occured!")}})};var c=f.trigger.split("|");switch(c[0]){case"keypress":e.keyup(function(h){if(h.keyCode==c[1]){g.doRequest()}});e.attr("autocomplete","off");this.preventEnter();break;case"blur":e.blur(function(h){g.doRequest()});break;case"change":e.change(function(h){g.doRequest()});break;case"click":e.click(function(h){g.doRequest()});break}}b.fn.fetchrow=function(c){var d={onPopulated:null,onNullPopulated:null,trigger:"keypress|13",keyfield:b(this)};b.extend(d,c);return this.each(function(){var e=new a(d,b(this))})}})(jQuery);
